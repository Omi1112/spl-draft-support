# システムパターン

## システムアーキテクチャ

- **Next.js**: サーバーサイドレンダリングとAPI機能を提供するReactフレームワーク
- **モノリシック構造**: フロントエンド・バックエンドを単一のNext.jsプロジェクトに統合
- **APIルート**: Next.jsのAPIルートを活用したサーバーサイドエンドポイント

## データモデル

- **Prisma ORM**: タイプセーフなデータベースクエリとマイグレーション管理を提供
- **PostgreSQL**: リレーショナルデータベースとしてPostgreSQLを使用

## 主要なデザインパターン

- **カスタムフック**: Reactコンポーネントからロジックを分離するためにカスタムフックを広く使用
- **コンテキストAPI**: アプリケーション状態の管理にReactのコンテキストAPIを使用
- **コロケーション**: コンポーネントと関連するロジック、テストなどを同じディレクトリに配置
- **分離されたデータアクセスレイヤー**: データベース操作とビジネスロジックを分離

## コンポーネント設計

- **機能ベース**: UIコンポーネントを機能単位でグループ化
- **原子デザイン**: 複雑なUIを小さな再利用可能なコンポーネントに分割
- **コンポーネント合成**: 小さなコンポーネントを組み合わせて複雑なUIを構築

## ステート管理

- **ローカルステート**: コンポーネントレベルのステート管理にはReactのuseState/useReducerを使用
- **アプリケーションステート**: 大規模状態管理にはコンテキストAPIを使用
- **サーバーステート**: データフェッチと管理にカスタムフックを使用

## エラーハンドリング

- **集中型エラー処理**: 一貫したエラーハンドリングパターン
- **ユーザーフレンドリーなエラーメッセージ**: 技術的なエラーを理解しやすいメッセージに変換

## テスト戦略

- **ユニットテスト**: ビジネスロジックと個別コンポーネントのテスト
- **インテグレーションテスト**: コンポーネント間の相互作用のテスト
- **コンポーネントテスト**: React Testing Libraryを使用したUI動作テスト
