# 事前読み込み

- prompt/index.md
- prompt/rule.md
- prompt/dir.md
- prompt/reflection.md

# タスク

# api/coreディレクトリに対するテストの作成

## 背景・目的

api/coreディレクトリはアプリケーションのコアビジネスロジックを実装しており、DDDのアーキテクチャパターンに基づいています。テストを作成することで品質を担保し、将来の変更に対する安全性を高めます。

## TODOリスト

1. **テスト対象の整理と把握**

   - [ ] app/api/core/application ディレクトリの構造と内容の調査
   - [ ] app/api/core/domain ディレクトリの構造と内容の調査
   - [ ] app/api/core/infrastructure ディレクトリの構造と内容の調査
   - [ ] テスト対象となるユースケースとサービスの特定

2. **テスト環境の整備**

   - [ ] **tests**/api/core ディレクトリ構造の作成
   - [ ] モックの準備（リポジトリなどの外部依存の代替）
   - [ ] テスト用のヘルパー関数の作成（必要に応じて）

3. **ドメイン層のテスト作成**

   - [ ] ドメインエンティティのテスト作成
   - [ ] ドメインサービスのテスト作成
   - [ ] バリュオブジェクトのテスト作成

4. **アプリケーション層のテスト作成**

   - [ ] ユースケースのテスト作成（各機能ごと）
   - [ ] DTOの変換処理のテスト作成
   - [ ] バリデーションロジックのテスト作成

5. **インフラストラクチャ層のテスト作成**

   - [ ] リポジトリ実装のテスト作成
   - [ ] 外部サービス連携のテスト作成
   - [ ] DBアクセスのテスト（統合テスト）

6. **エッジケースとエラーハンドリングのテスト**

   - [ ] 異常系テストの作成
   - [ ] エラー処理の検証
   - [ ] バウンダリ値のテスト

7. **テスト実行と検証**

   - [ ] 作成したテストの実行
   - [ ] カバレッジレポートの確認
   - [ ] 必要に応じてテストの修正・追加

8. **ドキュメントとコメント**
   - [ ] テストの目的と概要のコメント追加
   - [ ] テストケースの意図の文書化
   - [ ] 特殊なセットアップが必要な場合の説明追加
