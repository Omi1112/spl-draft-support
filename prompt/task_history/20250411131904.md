# 事前読み込み

- prompt/index.md
- prompt/rule.md
- prompt/dir.md
- prompt/reflection.md

# タスク

## 実現したい事

app/api/graphql/resolvers/tournamentResolvers.tsのTournamentの中の、tournamentParticipantsを実装する。

## TODO リスト

1. tournamentParticipantsリゾルバの実装

   - トーナメントの参加者情報を取得するロジックを実装
   - リゾルバーを既存の型定義に合わせて実装する
   - エラーハンドリングを適切に実装

2. 依存するユースケースの特定と実装確認

   - 必要なユースケース（GetTournamentParticipantsUseCaseなど）が存在するか確認
   - なければ必要なユースケースを新規作成

3. テストの作成

   - tournamentParticipantsリゾルバのテストを追加
   - 異常系を含めたテストケースを実装

4. コードの動作確認
   - 実装したリゾルバが正しく動作するかを確認
   - シリアライズに問題がないかを検証

## 必要な情報

### prompt/index.mdより

- プロジェクトはNext.js、Prisma、GraphQLを使用したトーナメント管理システム
- データモデルとして、トーナメント、参加者、トーナメント参加者関連テーブル、チーム、ドラフト、ドラフトステータスがある
- フロントエンドとバックエンドの連携にGraphQLを使用

### prompt/rule.mdより

- api ディレクトリはDDDを採用している
- 厳格な型チェックを使用したTypeScriptコードを生成する必要がある
- null/undefinedの可能性を考慮した安全なコードを書く必要がある
- エンティティの取り扱いルール:
  - 関係するエンティティはIDだけ保有しオブジェクトは保有しない
  - static createメソッドとreconstructメソッドを定義する
- リポジトリのルール:
  - エンティティと1対1の関係を持ち、エンティティが関係するDB以外の参照更新を行わない
  - mapToDomainEntityメソッドを持つ
  - ロジックを持たない、シンプルな実装

### prompt/dir.mdより

- GraphQLのリゾルバは`app/api/graphql/resolvers/`ディレクトリに配置されている
- コアビジネスロジックは`app/api/core/`に配置されている
  - application層: アプリケーションユースケース
  - domain層: ドメインエンティティ、リポジトリインターフェース
  - infrastructure層: リポジトリ実装など

### prompt/reflection.mdより

- GraphQLは「スキーマファーストアプローチ」を徹底する
- 機能追加・修正時には以下のコンポーネント間の整合性を常に確認:
  - GraphQLスキーマ
  - GraphQLリゾルバ
  - アプリケーション層のユースケース
  - クライアント側の呼び出しコード
- レイヤー間の明確な責務分離を維持する
- テストはエラーケースも含めて網羅的に実装する
