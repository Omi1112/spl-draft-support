このファイルを参照したら、このファイル名を発言してください。

# コード生成に関する指示

## 採用技術

### 2.1. 期待する役割 (エキスパートとしての振る舞い)

以下の技術スタックに精通したエキスパートとして振る舞ってください。

- **言語:** TypeScript, Node.js
- **フレームワーク/ライブラリ:** Next.js v15 (App Router), React
- **バックエンド/DB:** Postgres
- **ORM:** Prisma
- **スキーマ検証:** Zod
- **テスト:** jest

### 2.2. MCP (Model Context Protocol) の設定

- MCP の設定は `.vscode/mcp.json` にあります。

## ページ固有のデータフェッチ

場所: page.tsx または layout.tsx
理由: ページ全体で必要なデータを取得する場合、page.tsx または layout.tsx にフェッチ処理を記述します。これにより、ページ全体のデータ依存性が明確になります。

## 具体的な構成

以下のディレクトリ構成を基本とします。

```
/workspace/
├── app/                           # Next.jsアプリケーションのメインディレクトリ
│   ├── api/                       # APIエンドポイント
│   │   ├── core/                  # コアビジネスロジック
│   │   │   ├── application/       # アプリケーション層
│   │   │   ├── domain/            # ドメイン層
│   │   │   └── infrastructure/    # インフラストラクチャ層
│   │   └── graphql/               # GraphQL API
│   │       ├── resolvers/         # GraphQLリゾルバ
│   │       ├── types/             # GraphQLタイプ定義
│   │       ├── route.ts           # APIルート定義
│   │       └── schema.ts          # GraphQLスキーマ
│   ├── client/                    # クライアントサイドコード
│   ├── components/                # Reactコンポーネント
│   ├── hooks/                     # Reactフック hooksはpageディレクトリにhooksディレクトリを配置してください。
│   ├── utils/                     # ユーティリティ関数
│   ├── favicon.ico                # ファビコン
│   ├── globals.css                # グローバルCSS
│   ├── layout.tsx                 # レイアウト
│   └── page.tsx                   # メインページ
│
├── __tests__/                     # テストディレクトリ
├── prisma/                        # Prismaデータベース関連
│   ├── migrations/                # データベースマイグレーション
│   └── schema.prisma              # Prismaスキーマ定義
```

# コード生成

- コードを書く前に既存のコードを深くレビューし動作を確認します。
- 正確な例を用いて、簡潔で技術的なTypeScriptコードを記述します。
- ディレクトリ名にはキャメルケースを使用します（例：`components/personalInformation`）。
- ファイル名にはキャメルケースを使用します（例：`myComponent.ts`や`myComponent.tsx`）。
- 条件文では不要な中括弧を避け、1行文では中括弧を省略します。

## コメント

- コード例を示す際は、各行の目的を詳細なコメントで説明し、実行結果も示します。
- 複雑なロジックには明確で簡潔なコメントを付けます。
- JSDOC形式のコメントを使用して、関数やコンポーネントの説明を行います。
- コメントは日本語で記述します。
- コメントは、コードの意図や動作を明確にするために使用します。

## セキュリティ

- 現状は考慮しなくてよいです。

## 2. GitHub Copilot の役割と基本設定

### 2.3. サーバーアクションの活用

- Next.jsのサーバーアクションを積極的に使用してください。
- サーバーアクションを利用することで、クライアントサイドでの状態管理やAPI呼び出しを最小限に抑え、パフォーマンスとセキュリティを向上させます。
- サーバーアクションを利用する際は、以下の点に注意してください：
  - 入力データのバリデーションにはZodを使用する。
  - エラー処理を適切に実装し、ユーザーに分かりやすいエラーメッセージを提供する。
  - サーバーアクションの戻り値として、成功時とエラー時の両方のケースをモデル化する。
